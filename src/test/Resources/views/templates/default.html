{% use 'test:block_post.html' %}
<!DOCTYPE html>
<html>
<head>
<title>jQuery Ajax Example with JSON Response</title>
 <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" type="text/javascript"></script>
<script src="/js/fillElement.js" type="text/javascript"></script>
<script src="/js/formValidate.js" type="text/javascript"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
 
<!-- Write Javascript code here -->
<style>
	 #wines { width: 150px; height: 150px; padding: 0.5em; }
	 .error { width: 150px; height: 150px; padding: 0.5em; }
</style>
</head>
<body>
{% block form %}
  <form method="post" id="fillElement" action="">
    <button value="all" type="submit">click!</button>
  </form>
{% endblock form %}
{% form %}
{% block form2 %}
	<form method="post" id="testForm" name="testForm" action="">
    	<input type="text" name="email" />
    	<p class='error ui-widget-content'></p>
    	<img src="img/design.PNG" />
    	<input type="text" name="hey" />
    	<input type="submit" name="form" value="submit" />
  	</form>
{% endblock form2 %}
{% block uploadform %}
  	<form method="post" enctype="multipart/form-data">
		<input type='file' name='eins' />
		<input type='submit' value='abschieÃŸen' />
	</form>
{% endblock uploadform %}
{{block post}}
  <div id="wines" class="ui-widget-content">
  	was
  </div>
 <script>
 	var fillElement = new fillElement();
 	var formValidate = new formValidate();	
 	$(document).ready(function(){
 		$(function() {
		    $( ".ui-widget-content" ).draggable();
		  });
  		$(document).on('submit', '#fillElement', function(){
    		$.ajax({
		      url: '/test/hey',
		      data: 'button=' + $(this).val(),
		      dataType: 'json',
		    })
		    .done(function(data){
		    	fillElement.setElement("{{block post}}");
		    	fillElement.setContent("div.test", "javascript");
		    	fillElement.setAttribute("img", "src", "http://www.javatpoint.com/images/javascript/javascript_logo.png");
		    	var element = fillElement.getElement();
		    	$(element).appendTo('div#wines');
		    });
		return false;
		});
  		var form = {};
		$(document).on('submit', 'form#testForm', function(){
			formValidate.getData($(this), '/test/hey', validate, form);
			return false;
		});
	});
	var validate = function(change, form){
			$.each(change, function(name, value){
				if(change.email.valid){
					$('p').html(change.email.valid);
				}else{
					$('p').html('false');
				}
			});
			
	}
 </script>
</body>
</html>