{% use 'test:block_post.html' %}
<!DOCTYPE html>
<html>
<head>
<title>jQuery Ajax Example with JSON Response</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" type="text/javascript"></script>
<script src="/js/fillElement.js" type="text/javascript"></script>
<script src="/js/formValidate.js" type="text/javascript"></script>
 
<!-- Write Javascript code here -->
 
</head>
<body>
{% block form %}
  <form method="post" id="fillElement" action="">
    <button value="all" type="submit">click!</button>
  </form>
{% endblock form %}
{% form %}
{% block form2 %}
	<form method="post" id="" action="">
    	<input type="text" name="email" />
    	<p class='error'></p>
    	<input type="text" name="hey" />
    	<input type="submit" name="form" value="submit" />
  	</form>
{% endblock form2 %}
{{block post}}
  <div id="wines">
  <!-- Javascript will print data in here when we have finished the page -->
  </div>
 <script>
 	var fillElement = new fillElement();
 	var formValidate = new formValidate();
 	$(document).ready(function(){
  		$(document).on('submit', '#fillElement', function(){
    		$.ajax({
		      url: '/test/hey',
		      data: 'button=' + $(this).val(),
		      dataType: 'json',
		    })
		    .done(function(data){
		    	fillElement.setElement("{{block post}}");
		    	fillElement.setContent("div.test", "javascript");
		    	fillElement.setAttribute("img", "src", "http://www.javatpoint.com/images/javascript/javascript_logo.png");
		    	var element = fillElement.getElement();
		    	$(element).appendTo('div#wines');
		    });
		return false;
		});
  		var form = {};
		$(document).on('submit', 'form', function(){
			formValidate.getData($(this), '/test/hey', validate, form);
			return false;
		});	
	});
	var validate = function(change, form){

		console.log(change);
			$.each(change, function(name, value){
				$('p').html(value.valid);
			    console.log(name);
			});
	}
 </script>
</body>
</html>